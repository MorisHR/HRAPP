<!-- ═══════════════════════════════════════════════════════════
     PREMIUM TABLE COMPONENT TEMPLATE
     Part of the Fortune 500-grade HRMS design system
     ═══════════════════════════════════════════════════════════ -->

<div class="table-container">
  <!-- Table Wrapper -->
  <div class="table-wrapper">
    <table class="table">
      <!-- Table Header -->
      <thead class="table__thead">
        <tr class="table__header-row">
          <!-- Selection Column Header -->
          @if (selectable && multiSelect) {
            <th class="table__header table__header--checkbox">
              <label class="table__checkbox-container">
                <input
                  type="checkbox"
                  class="table__checkbox"
                  [checked]="allSelected"
                  [indeterminate]="indeterminate"
                  (change)="onSelectAll($event)"
                  [disabled]="loading || data.length === 0"
                />
                <span class="table__checkbox-visual"></span>
              </label>
            </th>
          }

          @if (selectable && !multiSelect) {
            <th class="table__header table__header--checkbox">
              <!-- Empty header for single select radio buttons -->
            </th>
          }

          <!-- Column Headers -->
          @for (column of columns; track column.key) {
            <th
              class="table__header"
              [class.table__header--sortable]="column.sortable"
              [style.width]="column.width"
              (click)="onSort(column)"
            >
              <div class="table__header-content">
                <span class="table__header-label">{{ column.label }}</span>
                @if (column.sortable) {
                  <span class="sort-icon" [ngClass]="getSortIconClass(column)">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M8 5L11 9H5L8 5Z" class="sort-icon__arrow sort-icon__arrow--up"/>
                      <path d="M8 11L5 7H11L8 11Z" class="sort-icon__arrow sort-icon__arrow--down"/>
                    </svg>
                  </span>
                }
              </div>
            </th>
          }
        </tr>
      </thead>

      <!-- Table Body -->
      <tbody class="table__tbody">
        <!-- Data Rows -->
        @if (!loading && data.length > 0) {
          @for (row of data; track row; let i = $index) {
            <tr
              [ngClass]="getRowClasses(row, i)"
              (click)="onRowClick(row)"
            >
              <!-- Selection Column -->
              @if (selectable && multiSelect) {
                <td class="table__cell table__cell--checkbox">
                  <label class="table__checkbox-container" (click)="$event.stopPropagation()">
                    <input
                      type="checkbox"
                      class="table__checkbox"
                      [checked]="isRowSelected(row)"
                      (change)="onRowSelectionChange(row, $event)"
                    />
                    <span class="table__checkbox-visual"></span>
                  </label>
                </td>
              }

              @if (selectable && !multiSelect) {
                <td class="table__cell table__cell--checkbox">
                  <label class="table__checkbox-container" (click)="$event.stopPropagation()">
                    <input
                      type="radio"
                      name="table-selection"
                      class="table__radio"
                      [checked]="isRowSelected(row)"
                      (change)="onRowSelectionChange(row, $event)"
                    />
                    <span class="table__radio-visual"></span>
                  </label>
                </td>
              }

              <!-- Data Columns -->
              @for (column of columns; track column.key) {
                <td class="table__cell">
                  {{ getCellValue(row, column) }}
                </td>
              }
            </tr>
          }
        }

        <!-- Loading State -->
        @if (loading) {
          @for (skeletonRow of [1, 2, 3, 4, 5]; track skeletonRow) {
            <tr class="table__row table__row--skeleton">
              @if (selectable) {
                <td class="table__cell table__cell--checkbox">
                  <div class="skeleton skeleton--checkbox"></div>
                </td>
              }

              @for (column of columns; track column.key) {
                <td class="table__cell">
                  <div class="skeleton skeleton--text"></div>
                </td>
              }
            </tr>
          }
        }
      </tbody>
    </table>
  </div>

  <!-- Empty State -->
  @if (!loading && data.length === 0) {
    <div class="table__empty-state">
      <svg class="table__empty-icon" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="8" y="16" width="48" height="40" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
        <line x1="8" y1="24" x2="56" y2="24" stroke="currentColor" stroke-width="2"/>
        <line x1="8" y1="32" x2="56" y2="32" stroke="currentColor" stroke-width="2"/>
        <line x1="8" y1="40" x2="56" y2="40" stroke="currentColor" stroke-width="2"/>
        <line x1="8" y1="48" x2="56" y2="48" stroke="currentColor" stroke-width="2"/>
      </svg>
      <p class="table__empty-message">No data available</p>
    </div>
  }
</div>

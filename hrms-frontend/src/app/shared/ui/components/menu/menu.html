<!-- Backdrop overlay -->
<div class="menu-backdrop" *ngIf="isOpen" (click)="close()"></div>

<!-- Menu panel -->
<div
  class="menu-panel"
  *ngIf="isOpen"
  [style.top]="menuPosition.top"
  [style.left]="menuPosition.left"
  role="menu"
  aria-orientation="vertical">

  <div class="menu-items">
    <ng-container *ngFor="let item of items; let i = index">
      <!-- Divider -->
      <div
        *ngIf="item.divider"
        class="menu-divider"
        role="separator">
      </div>

      <!-- Menu Item -->
      <button
        *ngIf="!item.divider"
        type="button"
        class="menu-item"
        [class.menu-item--disabled]="item.disabled"
        [class.menu-item--focused]="isFocused(item)"
        [class.menu-item--has-submenu]="item.submenu && item.submenu.length > 0"
        [disabled]="item.disabled"
        [attr.role]="'menuitem'"
        [attr.aria-disabled]="item.disabled"
        (click)="handleItemClick(item, $event)"
        (mouseenter)="onMouseEnterItem(item)">

        <!-- Icon -->
        <span class="menu-item__icon" *ngIf="item.icon">
          <i [class]="item.icon"></i>
        </span>

        <!-- Label -->
        <span class="menu-item__label">{{ item.label }}</span>

        <!-- Submenu indicator -->
        <span class="menu-item__submenu-indicator" *ngIf="item.submenu && item.submenu.length > 0">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <path d="M6 4L10 8L6 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
      </button>
    </ng-container>
  </div>
</div>

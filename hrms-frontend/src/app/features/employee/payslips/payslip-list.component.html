<div class="payslip-list-container">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1>My Payslips</h1>
      <p class="subtitle">View and download your salary statements</p>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <app-card class="stat-card">
      <div class="stat-icon">
        <app-icon name="receipt_long"></app-icon>
      </div>
      <div class="stat-details">
        <div class="stat-value">{{ stats().total }}</div>
        <div class="stat-label">Total Payslips</div>
      </div>
    </app-card>

    <app-card class="stat-card primary">
      <div class="stat-icon">
        <app-icon name="today"></app-icon>
      </div>
      <div class="stat-details">
        <div class="stat-value">{{ stats().currentYear }}</div>
        <div class="stat-label">This Year</div>
      </div>
    </app-card>

    <app-card class="stat-card success">
      <div class="stat-icon">
        <app-icon name="account_balance_wallet"></app-icon>
      </div>
      <div class="stat-details">
        <div class="stat-value">{{ formatCurrency(stats().totalEarnedThisYear) }}</div>
        <div class="stat-label">Total Earned (This Year)</div>
      </div>
    </app-card>

    <app-card class="stat-card accent">
      <div class="stat-icon">
        <app-icon name="payments"></app-icon>
      </div>
      <div class="stat-details">
        <div class="stat-value">{{ stats().latestPayslip ? formatCurrency(stats().latestPayslip!.netPay) : '-' }}</div>
        <div class="stat-label">Latest Payment</div>
      </div>
    </app-card>
  </div>

  <!-- Actions -->
  <app-card class="filter-card">
    <div class="filter-container">
      <app-button variant="primary" (click)="loadPayslips()">
        <app-icon name="refresh"></app-icon>
        <span>Refresh</span>
      </app-button>
    </div>
  </app-card>

  <!-- Payslips List/Table -->
  <app-card class="table-card">
    @if (loading()) {
      <div class="loading-container">
        <app-progress-spinner></app-progress-spinner>
        <p>Loading payslips...</p>
      </div>
    } @else if (payslips().length === 0) {
      <div class="empty-state">
        <app-icon name="receipt_long"></app-icon>
        <h3>No Payslips Found</h3>
        <p>You don't have any payslips yet. Your payslips will appear here once your payroll is processed.</p>
      </div>
    } @else {
      <div class="payslips-list">
        @for (payslip of payslips(); track payslip.id) {
          <div class="payslip-row">
            <div class="payslip-info">
              <div class="period-info">
                <app-icon name="date_range" class="period-icon"></app-icon>
                <div>
                  <div class="period-text">{{ payslip.payPeriod }}</div>
                  <div class="date-text">{{ formatDate(payslip.payDate) }}</div>
                </div>
              </div>
            </div>

            <div class="payslip-amounts">
              <div class="amount-item">
                <span class="amount-label">Gross:</span>
                <span class="amount">{{ formatCurrency(payslip.grossPay) }}</span>
              </div>
              <div class="amount-item">
                <span class="amount-label">Deductions:</span>
                <span class="amount deduction">-{{ formatCurrency(payslip.totalDeductions) }}</span>
              </div>
              <div class="amount-item net">
                <span class="amount-label">Net Pay:</span>
                <span class="amount net-pay">{{ formatCurrency(payslip.netPay) }}</span>
              </div>
            </div>

            <div class="payslip-actions">
              <app-button
                variant="ghost"
                size="small"
                [routerLink]="['/employee/payslips', payslip.id]"
                title="View Details">
                <app-icon name="visibility"></app-icon>
              </app-button>

              <app-button
                variant="ghost"
                size="small"
                (click)="downloadPayslip(payslip)"
                title="Download PDF">
                <app-icon name="download"></app-icon>
              </app-button>
            </div>
          </div>
        }
      </div>
    }
  </app-card>
</div>

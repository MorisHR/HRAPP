<mat-card>
  <mat-card-header>
    <mat-card-title>Location Management</mat-card-title>
    <div class="header-actions">
      <button mat-raised-button color="primary" (click)="onAdd()">
        <app-icon name="add"></app-icon>
        Add Location
      </button>
    </div>
  </mat-card-header>

  <mat-card-content>
    <!-- Loading Spinner -->
    @if (loading) {
      <div class="loading-container">
        <app-progress-spinner size="medium" color="primary"></app-progress-spinner>
        <p>Loading locations...</p>
      </div>
    }

    <!-- Error Message -->
    @if (error) {
      <div class="error-container">
        <mat-icon color="warn">error</mat-icon>
        <p>{{ error }}</p>
        <p class="error-hint">Please refresh the page or contact support if the issue persists.</p>
      </div>
    }

    <!-- Locations Table -->
    @if (!loading && !error) {
      <app-table
        [columns]="columns"
        [data]="locations"
        [loading]="loading"
        [hoverable]="true"
        emptyMessage="No locations found. Click 'Add Location' to create one."
        class="locations-table">

        <!-- Custom template for type column -->
        <ng-template appTableColumn="type" let-row>
          <span class="location-type-badge">{{ row.locationType || 'N/A' }}</span>
        </ng-template>

        <!-- Custom template for status column -->
        <ng-template appTableColumn="isActive" let-row>
          <span class="status-badge" [class.active]="row.isActive" [class.inactive]="!row.isActive">
            {{ row.isActive ? 'Active' : 'Inactive' }}
          </span>
        </ng-template>

        <!-- Custom template for actions column -->
        <ng-template appTableColumn="actions" let-row>
          <button mat-icon-button color="primary" (click)="onView(row.id)" appTooltip="View Details">
            <app-icon name="visibility"></app-icon>
          </button>
          <button mat-icon-button color="accent" (click)="onEdit(row.id)" appTooltip="Edit Location">
            <app-icon name="edit"></app-icon>
          </button>
          <button mat-icon-button color="warn" (click)="onDelete(row.id)" appTooltip="Delete Location">
            <app-icon name="delete"></app-icon>
          </button>
        </ng-template>
      </app-table>
    }
  </mat-card-content>
</mat-card>
